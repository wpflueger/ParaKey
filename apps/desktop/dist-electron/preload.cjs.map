{"version":3,"sources":["../electron/preload.ts"],"sourcesContent":["import { contextBridge, ipcRenderer } from \"electron\";\nimport type { AppSettings } from \"./settings\";\n\ncontextBridge.exposeInMainWorld(\"keymuse\", {\n  onBackendLog: (callback: (line: string) => void) => {\n    const handler = (_event: Electron.IpcRendererEvent, line: string) => callback(line);\n    ipcRenderer.on(\"backend:log\", handler);\n    return () => ipcRenderer.removeListener(\"backend:log\", handler);\n  },\n  onBackendStatus: (callback: (payload: { ready: boolean; detail: string }) => void) => {\n    const handler = (_event: Electron.IpcRendererEvent, payload: { ready: boolean; detail: string }) =>\n      callback(payload);\n    ipcRenderer.on(\"backend:status\", handler);\n    return () => ipcRenderer.removeListener(\"backend:status\", handler);\n  },\n  onDictationState: (callback: (payload: { state: string }) => void) => {\n    const handler = (_event: Electron.IpcRendererEvent, payload: { state: string }) => callback(payload);\n    ipcRenderer.on(\"dictation:state\", handler);\n    return () => ipcRenderer.removeListener(\"dictation:state\", handler);\n  },\n  onTranscript: (callback: (payload: { text: string }) => void) => {\n    const handler = (_event: Electron.IpcRendererEvent, payload: { text: string }) => callback(payload);\n    ipcRenderer.on(\"dictation:final\", handler);\n    return () => ipcRenderer.removeListener(\"dictation:final\", handler);\n  },\n  onInstallStatus: (callback: (payload: { status: string }) => void) => {\n    const handler = (_event: Electron.IpcRendererEvent, payload: { status: string }) => callback(payload);\n    ipcRenderer.on(\"install:status\", handler);\n    return () => ipcRenderer.removeListener(\"install:status\", handler);\n  },\n  onStartupError: (callback: (payload: { message: string }) => void) => {\n    const handler = (_event: Electron.IpcRendererEvent, payload: { message: string }) => callback(payload);\n    ipcRenderer.on(\"startup:error\", handler);\n    return () => ipcRenderer.removeListener(\"startup:error\", handler);\n  },\n  onCachePath: (callback: (payload: { path: string }) => void) => {\n    const handler = (_event: Electron.IpcRendererEvent, payload: { path: string }) => callback(payload);\n    ipcRenderer.on(\"startup:cache\", handler);\n    return () => ipcRenderer.removeListener(\"startup:cache\", handler);\n  },\n  getSettings: () => ipcRenderer.invoke(\"settings:get\") as Promise<AppSettings>,\n  saveSettings: (settings: AppSettings) => ipcRenderer.invoke(\"settings:save\", settings),\n  requestHistory: () => ipcRenderer.invoke(\"history:get\") as Promise<string[]>,\n  requestCachePath: () => ipcRenderer.invoke(\"cache:get\") as Promise<string>,\n  startDictation: () => ipcRenderer.invoke(\"dictation:start\"),\n  stopDictation: () => ipcRenderer.invoke(\"dictation:stop\"),\n  showMainWindow: () => ipcRenderer.invoke(\"window:show\"),\n  minimizeToTray: () => ipcRenderer.invoke(\"window:minimize\"),\n});\n"],"mappings":";AAAA,sBAA2C;AAG3C,8BAAc,kBAAkB,WAAW;AAAA,EACzC,cAAc,CAAC,aAAqC;AAClD,UAAM,UAAU,CAAC,QAAmC,SAAiB,SAAS,IAAI;AAClF,gCAAY,GAAG,eAAe,OAAO;AACrC,WAAO,MAAM,4BAAY,eAAe,eAAe,OAAO;AAAA,EAChE;AAAA,EACA,iBAAiB,CAAC,aAAoE;AACpF,UAAM,UAAU,CAAC,QAAmC,YAClD,SAAS,OAAO;AAClB,gCAAY,GAAG,kBAAkB,OAAO;AACxC,WAAO,MAAM,4BAAY,eAAe,kBAAkB,OAAO;AAAA,EACnE;AAAA,EACA,kBAAkB,CAAC,aAAmD;AACpE,UAAM,UAAU,CAAC,QAAmC,YAA+B,SAAS,OAAO;AACnG,gCAAY,GAAG,mBAAmB,OAAO;AACzC,WAAO,MAAM,4BAAY,eAAe,mBAAmB,OAAO;AAAA,EACpE;AAAA,EACA,cAAc,CAAC,aAAkD;AAC/D,UAAM,UAAU,CAAC,QAAmC,YAA8B,SAAS,OAAO;AAClG,gCAAY,GAAG,mBAAmB,OAAO;AACzC,WAAO,MAAM,4BAAY,eAAe,mBAAmB,OAAO;AAAA,EACpE;AAAA,EACA,iBAAiB,CAAC,aAAoD;AACpE,UAAM,UAAU,CAAC,QAAmC,YAAgC,SAAS,OAAO;AACpG,gCAAY,GAAG,kBAAkB,OAAO;AACxC,WAAO,MAAM,4BAAY,eAAe,kBAAkB,OAAO;AAAA,EACnE;AAAA,EACA,gBAAgB,CAAC,aAAqD;AACpE,UAAM,UAAU,CAAC,QAAmC,YAAiC,SAAS,OAAO;AACrG,gCAAY,GAAG,iBAAiB,OAAO;AACvC,WAAO,MAAM,4BAAY,eAAe,iBAAiB,OAAO;AAAA,EAClE;AAAA,EACA,aAAa,CAAC,aAAkD;AAC9D,UAAM,UAAU,CAAC,QAAmC,YAA8B,SAAS,OAAO;AAClG,gCAAY,GAAG,iBAAiB,OAAO;AACvC,WAAO,MAAM,4BAAY,eAAe,iBAAiB,OAAO;AAAA,EAClE;AAAA,EACA,aAAa,MAAM,4BAAY,OAAO,cAAc;AAAA,EACpD,cAAc,CAAC,aAA0B,4BAAY,OAAO,iBAAiB,QAAQ;AAAA,EACrF,gBAAgB,MAAM,4BAAY,OAAO,aAAa;AAAA,EACtD,kBAAkB,MAAM,4BAAY,OAAO,WAAW;AAAA,EACtD,gBAAgB,MAAM,4BAAY,OAAO,iBAAiB;AAAA,EAC1D,eAAe,MAAM,4BAAY,OAAO,gBAAgB;AAAA,EACxD,gBAAgB,MAAM,4BAAY,OAAO,aAAa;AAAA,EACtD,gBAAgB,MAAM,4BAAY,OAAO,iBAAiB;AAC5D,CAAC;","names":[]}